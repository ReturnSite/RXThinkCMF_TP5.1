!function(t){var e={};function o(n){if(e[n])return e[n].exports;var l=e[n]={i:n,l:!1,exports:{}};return t[n].call(l.exports,l,l.exports,o),l.l=!0,l.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)o.d(n,l,function(e){return t[e]}.bind(null,l));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=2)}([,,function(t,e,o){o(3)},function(t,e){layui.extend({common:"module/think_common",treeGird:"../layui/lay/modules/treeGird"}).define(["form","layer","table","common","treeGird"],function(t){"use strict";var e,o,n,l,a,i=layui.form,c=layui.table,r=layui.layer,u=layui.common,s=layui.$,d=0,f=0,b={tableIns:function(t,i,b=null,h="",g=!1){o=i,n=b,h&&""!=h||(h=cUrl+"/index");var p=s("#param").val();if(p){if(p=JSON.parse(p),s.isArray(p))for(var m in p)console.log("索引："+m+",参数："+p[m]),h.indexOf("?")>=0?h+="&"+p[m]:h+="?"+p[m];console.log("网络请求地址："+h)}return e=c.render({elem:"#"+o,url:h,method:"post",cellMinWidth:150,page:!0,page:{layout:["refresh","prev","page","next","skip","count","limit"],curr:1,groups:10,first:"首页",last:"尾页"},height:"full-160",limit:20,limits:[20,30,40,50,60,70,80,90,100,150,200,1e3],even:!0,cols:[t],loading:!0,done:function(t,e,o){if(console.log("TABLE加载成功"),a){var n=s(".layui-table-body").find("table").find("tbody");n.children("tr").on("dblclick",function(){var e=n.find(".layui-table-hover").data("index"),o=t.data[e];console.log("TABLE行对象ID："+o.id),u.edit(l,o.id,d,f)})}}}),c.on("toolbar("+o+")",function(t){var e=c.checkStatus(t.config.id);switch(t.event){case"getCheckData":var o=e.data;r.alert(JSON.stringify(o));break;case"getCheckLength":o=e.data;r.msg("选中了："+o.length+" 个");break;case"isAll":r.msg(e.isAll?"全选":"未全选")}}),c.on("tool("+o+")",function(t){var e=t.data,o=t.event;"del"===o?(console.log("删除操作"),u.drop(e.id,function(e,o){o?(console.log("删除成功"),t.del()):console.log("删除失败")})):"edit"===o?(console.log("编辑操作"),u.edit(l,e.id,d,f)):"detail"===o?(console.log("详情操作"),u.detail(l,e.id,d,f)):"cache"===o?(console.log("重置缓存操作"),u.cache(e.id)):"copy"===o&&(console.log("一键复制操作"),u.copy(l,e.id,d,f)),n&&n(o,e)}),c.on("checkbox("+o+")",function(t){console.log(t.checked),console.log(t.data),console.log(t.type)}),c.on("edit("+o+")",function(t){var e=t.value,o=t.data,n=t.field,l={};l.id=o.id,l[n]=e;var a=JSON.stringify(l);console.log("JSON字符串:"+a);var i=JSON.parse(a),c=cUrl+"/update";u.ajaxPost(c,i,function(t,o){console.log("字段【"+n+"】:【"+e+"】值更新成功")},"更新中...")}),c.on("row("+o+")",function(t){t.tr.addClass("layui-table-click").siblings().removeClass("layui-table-click");var e=t.data;console.log("单击对象ID："+e.id)}),g&&c.on("sort("+o+")",function(t){console.log(t.field),console.log(t.type),console.log(this),c.reload(o,{initSort:t,where:{field:t.field,order:t.type}})}),this},setDbclick:function(t){return a=t||!0,this},treeIns:function(t,e,o=!1,n=null,a=""){a||(a=cUrl+"/index");var c,r=layui.treeGird({elem:"#"+e,spreadable:o||!1,checkbox:!0,nodes:(s.ajaxSetup({async:!1}),s.post(a,{},function(t){t.success&&(c=t.data)},"json"),s.ajaxSetup({async:!0}),c),layout:t});i.render(),s("#collapse").on("click",function(){return layui.collapse(r),!1}),s("#expand").on("click",function(){return layui.expand(r),!1}),i.on("checkbox(*)",function(t){console.log(t.elem),console.log(t.elem.checked),console.log(t.value),console.log(t.othis);var e=layui.getSelected(r);console.log(e.length)}),s(".btnAdd2").click(function(){var t=s(this).attr("data-id");n?n("btnAdd2",0,t):u.edit(l,0,d,f,["pid="+t])}),s(".btnEdit").click(function(){var t=s(this).attr("data-id");n?n("btnEdit",t,0):u.edit(l,t,d,f)}),s(".btnDel").click(function(){var t=s(this).attr("data-id");n?n("btnDel",t,0):u.drop(t,function(t,e){console.log("树节点已删除")})}),s(".btnSetAuth").click(function(){var t=s(this).attr("data-id");n&&n("btnSetAuth",t,0)})},setWin:function(t,e=0,o=0){return l=t,d=e,f=o,this},searchForm:function(t,e){i.on("submit("+t+")",function(t){return u.searchForm(c,t,e),!1})},getCheckData:function(t){return t||(t=o),c.checkStatus(t).data},initDate:function(t,e=null){u.initDate(t,function(t,o){e&&e(t,o)})},showWin:function(t,e,o=0,n=0,l=[],a=2,i=[],c=null){u.showWin(t,e,o,n,l,a,i,function(t,e){c&&c(t,e)})},ajaxPost:function(t,e,o=null,n="处理中..."){u.ajaxPost(t,e,o,n)},formSwitch:function(t,e="",o=null){u.formSwitch(t,e,function(t,e){o&&o(t,e)})},uploadFile:function(t,e=null,o="",n="xls|xlsx",l=10240,a={}){u.uploadFile(t,function(t,o){console.log("上传回调成功"),e&&e(t,o)},o,n,l,a)}};u.verify(),i.on("submit(submitForm)",function(t){return u.submitForm(t),!1}),i.on("submit(searchForm)",function(t){return u.searchForm(c,t),!1}),s(".btnOption").click(function(){var t=s(this).attr("data-param");t&&(t=JSON.parse(t));var n=b.getCheckData(o),a=s(this).attr("lay-event");switch(a){case"add":u.edit(l,0,d,f,t);break;case"batchDrop":(i={title:"批量删除"}).url=cUrl+"/batchDrop",i.data=n,i.confirm=!0,u.batchFunc(i,function(){console.log("批量删除成功"),e.reload()});break;case"batchCache":(i={title:"批量重置缓存"}).url=cUrl+"/batchCache",i.data=n,i.confirm=!0,u.batchFunc(i,function(){console.log("批量重置缓存成功"),e.reload()});break;case"batchEnable":(i={title:"批量启用状态"}).url=cUrl+"/batchStatus",i.param=t,i.data=n,i.form="submitForm",i.confirm=!0,i.show_tips="处理中...",u.batchFunc(i,function(){console.log("批量开启成功"),e.reload()});break;case"batchDisable":var i;(i={title:"批量禁用状态"}).url=cUrl+"/batchStatus",i.param=t,i.data=n,i.confirm=!0,u.batchFunc(i,function(){console.log("批量禁用成功"),e.reload()});break;case"export":r.msg("导出"),location.href=cUrl+"/btn"+a.substring(0,1).toUpperCase()+a.substring(1);case"import":u.uploadFile("import",function(t,e){console.log("上传回调成功")})}}),s(".closeWin").click(function(){var t=parent.layer.getFrameIndex(window.name);parent.layer.close(t)}),t("func",b)})}]);