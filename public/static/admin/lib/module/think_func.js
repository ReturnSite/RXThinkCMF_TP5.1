!function(e){var t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(o,l,function(t){return e[t]}.bind(null,l));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([,,function(e,t,n){n(3)},function(e,t){layui.extend({common:"module/think_common",treeGird:"extend/treeGird/treeGird",treetable:"extend/treetable/treetable"}).define(["form","layer","table","common","treeGird","treetable"],function(e){"use strict";var t,n,o,l,i,a=layui.form,c=layui.table,r=layui.layer,u=layui.common,d=layui.treetable,s=layui.$,f=0,b=0,h={tableIns:function(e,a,d=null,h="",p=!1){n=a,o=d,h&&""!=h||(h=cUrl+"/index");var g=s("#param").val();if(g){if(g=JSON.parse(g),s.isArray(g))for(var m in g)console.log("索引："+m+",参数："+g[m]),h.indexOf("?")>=0?h+="&"+g[m]:h+="?"+g[m];console.log("网络请求URL："+h)}return t=c.render({elem:"#"+n,url:h,method:"post",cellMinWidth:150,page:{layout:["refresh","prev","page","next","skip","count","limit"],curr:1,groups:10,first:"首页",last:"尾页"},height:"full-160",limit:20,limits:[20,30,40,50,60,70,80,90,100,150,200,1e3],even:!0,cols:[e],loading:!0,done:function(e,t,n){if(console.log("TABLE加载成功"),i){var o=s(".layui-table-body").find("table").find("tbody");o.children("tr").on("dblclick",function(){var t=o.find(".layui-table-hover").data("index"),n=e.data[t];console.log("TABLE行对象ID："+n.id),u.edit(l,n.id,f,b)})}}}),c.on("toolbar("+n+")",function(e){var t=c.checkStatus(e.config.id);switch(e.event){case"getCheckData":var n=t.data;r.alert(JSON.stringify(n));break;case"getCheckLength":n=t.data;r.msg("选中了："+n.length+" 个");break;case"isAll":r.msg(t.isAll?"全选":"未全选")}}),c.on("tool("+n+")",function(e){var t=e.data,n=e.event;"edit"===n?u.edit(l,t.id,f,b):"detail"===n?u.detail(l,t.id,f,b):"del"===n?u.drop(t.id,function(t,n){n?(console.log("记录删除成功"),e.del()):console.log("记录删除失败")}):"cache"===n?u.cache(t.id):"copy"===n?u.copy(l,t.id,f,b):o&&o(n,t)}),c.on("checkbox("+n+")",function(e){console.log(e.checked),console.log(e.data),console.log(e.type)}),c.on("edit("+n+")",function(e){var t=e.value,n=e.data,o=e.field,l={};l.id=n.id,l[o]=t;var i=JSON.stringify(l);console.log("JSON字符串:"+i);var a=JSON.parse(i),c=cUrl+"/update";u.ajaxPost(c,a,function(e,n){console.log("字段【"+o+"】:【"+t+"】值更新成功")},"更新中...")}),c.on("row("+n+")",function(e){e.tr.addClass("layui-table-click").siblings().removeClass("layui-table-click");var t=e.data;console.log("单击对象ID："+t.id)}),p&&c.on("sort("+n+")",function(e){console.log(e.field),console.log(e.type),console.log(this),c.reload(n,{initSort:e,where:{field:e.field,order:e.type}})}),this},treeIns:function(e,t,n=!1,o=null,i=""){i||(i=cUrl+"/index");var c,r=layui.treeGird({elem:"#"+t,spreadable:n||!1,checkbox:!0,nodes:(s.ajaxSetup({async:!1}),s.post(i,{},function(e){e.success&&(c=e.data)},"json"),s.ajaxSetup({async:!0}),c),layout:e});a.render(),s("#collapse").on("click",function(){return layui.collapse(r),!1}),s("#expand").on("click",function(){return layui.expand(r),!1}),a.on("checkbox(*)",function(e){console.log(e.elem),console.log(e.elem.checked),console.log(e.value),console.log(e.othis);var t=layui.getSelected(r);console.log(t.length)}),s(".btnAdd2").click(function(){var e=s(this).attr("data-id");o?o("btnAdd2",0,e):u.edit(l,0,f,b,["pid="+e])}),s(".btnEdit").click(function(){var e=s(this).attr("data-id");o?o("btnEdit",e,0):u.edit(l,e,f,b)}),s(".btnDel").click(function(){var e=s(this).attr("data-id");o?o("btnDel",e,0):u.drop(e,function(e,t){console.log("树节点已删除")})}),s(".btnSetAuth").click(function(){var e=s(this).attr("data-id");o&&o("btnSetAuth",e,0)})},treetable:function(e=[],o,i=!0,a=0,h="",p=null,g=""){n=o,g||(g=cUrl+"/index"),t=d.render({treeColIndex:2,treeSpid:a,treeIdName:"id",treePidName:h||"parent_id",treeDefaultClose:!i,treeLinkage:!1,elem:"#"+o,url:g,height:"full-160",cellMinWidth:100,page:!1,cols:[e],done:function(e,t,n){console.log(e),console.log(t),console.log(n),r.closeAll("loading")}}),c.on("tool("+o+")",function(e){var t=e.data,n=e.event,o=t.id;"add"===n?u.edit(l,0,f,b,["pid="+o]):"edit"===n?u.edit(l,o,f,b):"del"===n?u.drop(o,function(t,n){n?(console.log("记录删除成功"),e.del()):console.log("记录删除失败")}):p&&p(n,o,0)}),s("#collapse").on("click",function(){d.foldAll("#"+o)}),s("#expand").on("click",function(){d.expandAll("#"+o)}),s("#refresh").on("click",function(){d.foldAll("#"+o)})},setWin:function(e,t=0,n=0){return l=e,f=t,b=n,this},setDbclick:function(e){return i=e||!0,this},searchForm:function(e,t){a.on("submit("+e+")",function(e){return u.searchForm(c,e,t),!1})},getCheckData:function(e){return e||(e=n),c.checkStatus(e).data},initDate:function(e,t=null){u.initDate(e,function(e,n){t&&t(e,n)})},showWin:function(e,t,n=0,o=0,l=[],i=2,a=[],c=null){u.showWin(e,t,n,o,l,i,a,function(e,t){c&&c(e,t)})},ajaxPost:function(e,t,n=null,o="处理中..."){u.ajaxPost(e,t,n,o)},formSwitch:function(e,t="",n=null){u.formSwitch(e,t,function(e,t){n&&n(e,t)})},uploadFile:function(e,t=null,n="",o="xls|xlsx",l=10240,i={}){u.uploadFile(e,function(e,n){console.log("上传回调成功"),t&&t(e,n)},n,o,l,i)}};u.verify(),a.on("submit(submitForm)",function(e){return u.submitForm(e),!1}),a.on("submit(searchForm)",function(e){return u.searchForm(c,e),!1}),s(".btnOption").click(function(){var e=s(this).attr("data-param");e&&(e=JSON.parse(e));var o=h.getCheckData(n),i=s(this).attr("lay-event");switch(i){case"add":u.edit(l,0,f,b,e);break;case"batchDrop":(a={title:"批量删除"}).url=cUrl+"/batchDrop",a.data=o,a.confirm=!0,u.batchFunc(a,function(){console.log("批量删除成功"),t.reload()});break;case"batchCache":(a={title:"批量重置缓存"}).url=cUrl+"/batchCache",a.data=o,a.confirm=!0,u.batchFunc(a,function(){console.log("批量重置缓存成功"),t.reload()});break;case"batchEnable":(a={title:"批量启用状态"}).url=cUrl+"/batchStatus",a.param=e,a.data=o,a.form="submitForm",a.confirm=!0,a.show_tips="处理中...",u.batchFunc(a,function(){console.log("批量开启成功"),t.reload()});break;case"batchDisable":var a;(a={title:"批量禁用状态"}).url=cUrl+"/batchStatus",a.param=e,a.data=o,a.confirm=!0,u.batchFunc(a,function(){console.log("批量禁用成功"),t.reload()});break;case"export":r.msg("导出"),location.href=cUrl+"/btn"+i.substring(0,1).toUpperCase()+i.substring(1);break;case"import":u.uploadFile("import",function(e,t){console.log("上传回调成功")})}}),window.formClose=function(){var e=parent.layer.getFrameIndex(window.name);parent.layer.close(e)},e("func",h)})}]);