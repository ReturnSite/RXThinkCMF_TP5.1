!function(n){var e={};function o(t){if(e[t])return e[t].exports;var i=e[t]={i:t,l:!1,exports:{}};return n[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=n,o.c=e,o.d=function(n,e,t){o.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},o.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},o.t=function(n,e){if(1&e&&(n=o(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)o.d(t,i,function(e){return n[e]}.bind(null,i));return t},o.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(e,"a",e),e},o.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},o.p="",o(o.s=0)}([function(n,e,o){o(1)},function(n,e){layui.extend({comm:"../js/comm"}).define(["form","layer","laydate","upload","comm"],function(n){"use strict";var e=layui.form,o=void 0===parent.layer?layui.layer:top.layer,t=layui.laydate,i=layui.upload,r=layui.comm,l=layui.$,a={edit:function(n,e=0,o=0,t=0,i=[]){var l=e>0?"修改":"新增";r.isEmpty(n)?l+="内容":l+=n;var c=cUrl+"/edit?id="+e;if(Array.isArray(i))for(var s in i)console.log("索引："+s+",数据源："+i[s]),c+="&"+i[s];console.log("URL请求地址："+c),a.showWin(l,c,o,t,i)},detail:function(n,e,o=0,t=0){var i=cUrl+"/detail?id="+e;a.showWin(n+"详情",i,o,t)},cache:function(n){var e=cUrl+"/cache";a.ajaxPost(e,{id:n},function(n,e){console.log("请求回调:重置缓存...")})},copy:function(n,e,o=0,t=0){var i=cUrl+"/copy?id="+e;a.showWin(n+"复制",i,o,t)},drop:function(n,e=null){o.confirm("您确定要删除吗？删除后将无法恢复！",{icon:3,skin:"layer-ext-moon",btn:["确认","取消"]},function(t){var i=cUrl+"/drop";a.ajaxPost(i,{id:n},function(n,i){e&&(console.log("删除成功ID:"+n.id),o.close(t),e(n,i))},"正在删除。。。")})},batchFunc:function(n,e=null){var t=n.url,i=n.title,r=(n.form,n.confirm||!1),l=n.show_tips||"处理中...",c=n.data||[],s=n.param||[];if(0==c.length)return o.msg("请选择数据",{icon:5}),!1;var u=[];for(var f in c)u.push(c[f].id);var d=u.join(","),m={};if(m.id=d,Array.isArray(s))for(var f in s){var y=s[f].split("=");m[y[0]]=y[1]}r?o.confirm("您确定要【"+i+"】选中的数据吗？",{icon:3,title:"提示信息"},function(n){a.ajaxPost(t,m,e,l)}):a.ajaxPost(t,m,e,l)},verify:function(){e.verify({required:function(n,e){var o=l(e).data("title");if(o||(o=l(e).parents(".layui-inline").find(".layui-form-label").text()).indexOf("：")>=0&&(o=o.substring(0,o.Length-1)),!n)return l(e).attr("placeholder")},number:[/^[0-9]*$/,"请输入数字"],username:function(n,e){return new RegExp("^[a-zA-Z0-9_一-龥\\s·]+$").test(n)?/(^\_)|(\__)|(\_+$)/.test(n)?title+"首尾不能出现下划线'_'":/^\d+\d+\d$/.test(n)?title+"不能全为数字":void 0:title+"不能含有特殊字符"},pass:[/^[\S]{6,12}$/,"密码必须6到12位，且不能出现空格"]})},submitForm:function(n){var e=o.msg("数据提交中，请稍候...",{icon:16,time:!1,shade:.2});l.post(aUrl,n.field,function(n){if(n.success)return o.close(e),o.msg(n.msg,{icon:6}),o.closeAll("iframe"),parent.location.reload(),!1;o.close(e),o.msg(n.msg)},"json")},searchForm:function(n,e,o="tableList"){n.reload(o,{page:{curr:1},where:e.field})},initDate:function(n,e=null){if(Array.isArray(n))for(var o in n){console.log("索引："+o),console.log("组件元素："+n[o]);var i=n[o].split("|");if(console.log("组件ID："+i[0]),i[2]){console.log("日期参数："+i[2]);var r=i[2].split(",")}var l={};if(l.elem="#"+i[0],l.type=i[1],l.theme="molv",l.range="true"===i[3]||i[3],l.calendar=!0,l.show=!1,l.position="absolute",l.trigger="click",l.btns=["clear","now","confirm"],l.mark={"0-06-25":"生日","0-12-31":"跨年"},l.ready=function(n){console.log("组件面板打开："+n)},l.change=function(n,e,o){console.log(n),console.log(e),console.log(o)},l.done=function(n,o,t){e&&e(n,o)},r){var a=r[0];if(a){var c=!isNaN(a);l.min=c?parseInt(a):a}var s=r[1];if(s){var u=!isNaN(s);l.max=u?parseInt(s):s}}t.render(l)}},showWin:function(n,e,t=0,i=0,r=[],a=2,c=[],s=null){var u=layui.layer.open({title:n,type:a,area:[t+"px",i+"px"],content:e,closeBtn:!1,shadeClose:!0,shade:.4,maxmin:!0,success:function(n,e){if(Array.isArray(r))for(var t in r){var i=r[t].split("=");console.log("传值："+i[0]+","+i[1]),layui.layer.getChildFrame("body",e).find("#"+i[0]).val(i[1])}s&&s(n,e),setTimeout(function(){o.tips("点击此处返回列表",".layui-layer-setwin .layui-layer-close",{tips:3})},500)},end:function(){}});0==t&&(layui.layer.full(u),l(window).on("resize",function(){layui.layer.full(u)}))},ajaxPost:function(n,e,t=null,i="处理中,请稍后..."){var r=null;l.ajax({url:n,dataType:"json",type:"POST",data:e,beforeSend:function(){r=o.msg(i,{icon:16,shade:.01,time:0})},success:function(n){if(!n.success)return o.msg(n.msg,{icon:5}),!1;o.msg(n.msg,{icon:1,time:500},function(){o.close(r),t&&t(e,!0)})},error:function(){o.msg("AJAX请求异常"),t&&t(e,!1)}})},formSwitch:function(n,o="",t=null){e.on("switch("+n+")",function(e){var i=this.checked?"1":"2";r.isEmpty(o)&&(o=cUrl+"/set"+n.substring(0,1).toUpperCase()+n.substring(1)),console.log("请求URL地址："+o);var l={};l.id=this.value,l[n]=i;var c=JSON.stringify(l);console.log("JSON字符串:"+c);var s=JSON.parse(c);a.ajaxPost(o,s,function(n,e){t&&t(n,e)})})},uploadFile:function(n,e=null,t="",l="xls|xlsx",a=10240,c={}){r.isEmpty(t)&&(t=cUrl+"/uploadFile"),i.render({elem:"#"+n,url:t,auto:!1,exts:l,accept:"file",size:a,method:"post",data:c,before:function(n){o.msg("上传并处理中。。。",{icon:16,shade:.01,time:0})},done:function(n){return o.closeAll(),n.success?o.alert(n.msg,{title:"上传反馈",skin:"layui-layer-molv",closeBtn:1,anim:0,btn:["确定","取消"],icon:6,yes:function(){console.log("您点击了确定"),e&&e(n,!0)},btn2:function(){console.log("您点击了取消")}}):o.msg(n.msg,{icon:5}),!1},error:function(){return o.msg("数据请求异常")}})}};n("common",a)})}]);